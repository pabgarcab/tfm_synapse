{
	"name": "Create Views Reporting",
	"properties": {
		"content": {
			"query": "-- ==============================================================================\n-- Vistas de la capa Gold para el informe\n-- ==============================================================================\n\n-- Arreglar dateop en noteboobk\n\nCREATE OR ALTER VIEW fact.Sales AS \nSELECT  s.skSales,\n        s.idSales,\n        s.idArticles,\n        skArticles,\n        s.idWarehouse,\n        skWarehouse,\n        s.idClient,\n        skClient, \n        s.idPostalCode,\n        skPostalCode, \n        s.idCurrency,\n        skCurrency,\n        s.idTariff,\n        skTariff, \n        s.idOperationType,\n        skOperationType,\n        s.idHours,\n        skHours,\n        s.idDate,\n        skDate,\n        s.date,\n        s.dateOp,\n        s.ticketNumber,\n        s.quantity,\n        s.unitPrice,\n        s.unitCost,\n        s.amtTotalEuros,\n        s.amtNetEuros,\n        s.amtTotalEurosDiscount,\n        s.amtNetEurosDiscount,\n        s.discountSale,\n        s.amtTotalDiscount,\n        s.amtNetDiscount,\nFROM gold.dbo.fact_Sales AS s\n\n\nCREATE OR ALTER VIEW dim.Articles AS\n-- SELECT  -1 AS skarticles, \n--         -1 AS idarticles, \n--         'D' AS name, \n--         'D' AS description, \n--         'D' AS externalCode, \n--         'D' AS size, \n--         -1  AS numSize, \n--         'D' AS colour, \n--         'D' AS category, \n--         -1  AS codLine, \n--         'D' AS line, \n--         'D' AS season\n\n-- UNION \n\nSELECT  skarticles, \n        idarticles, \n        name, \n        description, \n        externalCode, \n        size, \n        numSize, \n        colour, \n        category, \n        codLine, \n        line, \n        season\nFROM gold.dbo.dim_articles;\n\nCREATE OR ALTER VIEW dim.Client AS\nSELECT  -1 AS skClient,\n        -1 AS idClient,\n        'D' AS name,\n        'D' AS lastName1,\n        'D' AS lastName2,\n        'D' AS email,\n        'D' AS phoneNumber,\n        'D' AS birthDay,\n        -1 AS age,\n        'D' AS gender,\n        'D' AS country,\n        'D' AS countryCode,\n        'D' AS region,\n        'D' AS address,\n        'D' AS postalCode,\n        0 AS active\nUNION\nSELECT  skClient,\n        idClient,\n        name,\n        lastName1,\n        lastName2,\n        email,\n        phoneNumber,\n        birthDay,\n        age,\n        gender,\n        country,\n        countryCode,\n        region,\n        address,\n        postalCode,\n        active\nFROM gold.dbo.dim_client\n\nCREATE OR ALTER VIEW dim.Currency AS\nSELECT  -1 AS skCurrency,\n        -1 AS idCurrency,\n        'D' AS name,\n        'D' AS currency\nUNION\nSELECT  skCurrency,\n        idCurrency,\n        name,\n        currency\nFROM gold.dbo.dim_currency\n\nCREATE OR ALTER VIEW dim.Date AS\nSELECT  -1 AS skDate,\n        -1 AS idDate,\n        -1 AS datekey,\n        CAST('1990-01-01' AS datetime2(7)) AS date,\n        'D' AS month,\n        -1 AS monthNumber,\n        -1 AS year,\n        -1 AS weekNumber,\n        'D' AS dayWeek,\n        -1 AS dayWeekNumber,\n        -1 AS yearDay,\n        'D' AS quarter,\n        'D' AS quadrimester,\n        'D' AS semester\nUNION\nSELECT  skDate,\n        idDate,\n        datekey,\n        date,\n        month,\n        monthNumber,\n        year,\n        weekNumber,\n        dayWeek,\n        dayWeekNumber,\n        yearDay,\n        quarter,\n        quadrimester,\n        semester\nFROM gold.dbo.dim_date\n\nCREATE OR ALTER VIEW dim.Hours AS\nSELECT  -1 AS skHours,\n        -1 AS idHours,\n        -1 AS hour,\n        -1 AS minute,\n        'D' AS fullHour\nUNION\nSELECT  skHours,\n        idHours,\n        hour,\n        minute,\n        fullHour\nFROM gold.dbo.dim_hours\n\n\nCREATE OR ALTER VIEW dim.OperationType AS\nSELECT  -1 AS skOperationType,\n        -1 AS idOperationType,\n        'D' AS operation\nUNION \nSELECT  skOperationType,\n        idOperationType,\n        operation\nFROM gold.dbo.dim_operationtype\n\n\nCREATE OR ALTER VIEW dim.PostalCode AS\nSELECT  -1 AS skPostalCode,\n        -1 AS idPostalCode,\n        'D' AS postalCode,\n        'D' AS region,\n        'D' AS countryCode,\n        'D' AS country\nUNION\nSELECT  skPostalCode,\n        idPostalCode,\n        postalCode,\n        region,\n        countryCode,\n        country\nFROM gold.dbo.dim_postalcode\n\n\nCREATE OR ALTER VIEW dim.Tariff AS\nSELECT  -1 AS skTariff,\n        -1 AS idTariff,\n        'D' AS tariff\nUNION\nSELECT  skTariff,\n        idTariff,\n        tariff\nFROM gold.dbo.dim_tariff\n\n\nCREATE OR ALTER VIEW dim.Warehouse AS\nSELECT  -1 AS skWarehouse,\n        -1 AS idWarehouse,\n        'D' AS warehouse,\n        'D' AS externalCode,\n        'D' AS countryCode,\n        'D' AS country,\n        'D' AS city,\n        'D' AS address,\n        'D' AS description\nUNION\nSELECT  skWarehouse,\n        idWarehouse,\n        warehouse,\n        externalCode,\n        countryCode,\n        country,\n        city,\n        address,\n        description\nFROM gold.dbo.dim_warehouse",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "ReportingDB",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}