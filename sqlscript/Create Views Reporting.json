{
	"name": "Create Views Reporting",
	"properties": {
		"content": {
			"query": "-- ==============================================================================\n-- Vistas de la capa Gold para el informe\n-- ==============================================================================\n\n-- Arreglar dateop en noteboobk\n\nCREATE OR ALTER VIEW fact.Sales AS \nSELECT  s.skSales,\n        s.idSales,\n        s.idArticles,\n        COALESCE(a.skArticles, -1) AS skArticles,\n        s.idWarehouse,\n        COALESCE(w.skWarehouse, -1) AS skWarehouse,\n        s.idClient,\n        COALESCE(cl.skClient, -1) AS skClient, \n        s.idPostalCode,\n        COALESCE(p.skPostalCode, -1) AS skPostalCode, \n        s.idCurrency,\n        COALESCE(cu.skCurrency, -1) AS skCurrency,\n        s.idTariff,\n        COALESCE(t.skTariff, -1) AS skTariff, \n        s.idOperationType,\n        COALESCE(o.skOperationType, -1) AS skOperationType,\n        s.idHours,\n        COALESCE(h.skHours, -1) AS skHours,\n        s.idDate,\n        COALESCE(d.skDate, -1) AS skDate,\n        s.date,\n        s.dateOp,\n        s.ticketNumber,\n        s.quantity,\n        s.unitPrice,\n        s.unitCost,\n        s.amtTotalEuros,\n        s.amtNetEuros,\n        s.amtTotalEurosDiscount,\n        s.amtNetEurosDiscount,\n        s.discountSale,\n        s.amtTotalDiscount,\n        s.amtNetDiscount,\n        s.loadDate,\n        s.deltaDate\nFROM gold.dbo.fact_Sales AS s\nLEFT JOIN [gold].[dbo].[dim_Articles] AS a\n    ON s.idArticles = a.idArticles AND s.dateOp BETWEEN a.fromDate AND a.toDate\nLEFT JOIN [gold].[dbo].[dim_Client] AS cl\n    ON s.idClient = cl.idClient AND s.dateOp BETWEEN cl.fromDate AND cl.toDate\nLEFT JOIN [gold].[dbo].[dim_Currency] AS cu\n    ON s.idCurrency = cu.idCurrency AND s.dateOp BETWEEN cu.fromDate AND cu.toDate\nLEFT JOIN [gold].[dbo].[dim_Date] AS d\n    ON s.idDate = d.idDate AND s.dateOp BETWEEN d.fromDate AND d.toDate\nLEFT JOIN [gold].[dbo].[dim_Hours] AS h\n    ON s.idHours = h.idHours AND s.dateOp BETWEEN h.fromDate AND h.toDate\nLEFT JOIN [gold].[dbo].[dim_OperationType] AS o\n    ON s.idOperationType = o.idOperationType AND s.dateOp BETWEEN o.fromDate AND o.toDate\nLEFT JOIN [gold].[dbo].[dim_PostalCode] AS p\n    ON s.idPostalCode = p.idPostalCode AND s.dateOp BETWEEN p.fromDate AND p.toDate\nLEFT JOIN [gold].[dbo].[dim_Tariff] AS t\n    ON s.idTariff = t.idTariff AND s.dateOp BETWEEN t.fromDate AND t.toDate\nLEFT JOIN [gold].[dbo].[dim_Warehouse] AS w\n    ON s.idWarehouse = w.idWarehouse AND s.dateOp BETWEEN w.fromDate AND w.toDate\n\n\nCREATE OR ALTER VIEW dbo.Articles AS\nSELECT  skarticles, \n        idarticles, \n        name, \n        description, \n        externalCode, \n        size, \n        numSize, \n        colour, \n        category, \n        codLine, \n        line, \n        season\nFROM gold.dbo.dbo_articles\n\nCREATE OR ALTER VIEW dbo.Client AS\nSELECT *\nFROM gold.dbo.dbo_client\n\nCREATE OR ALTER VIEW dbo.Currency AS\nSELECT *\nFROM gold.dbo.dbo_currency\n\nCREATE OR ALTER VIEW dbo.Date AS\nSELECT *\nFROM gold.dbo.dbo_date\n\nCREATE OR ALTER VIEW dbo.Hours AS\nSELECT *\nFROM gold.dbo.dbo_hours\n\nCREATE OR ALTER VIEW dbo.OperationType AS\nSELECT *\nFROM gold.dbo.dbo_operationtype\n\nCREATE OR ALTER VIEW dbo.PostalCode AS\nSELECT *\nFROM gold.dbo.dbo_postalcode\n\nCREATE OR ALTER VIEW dbo.Tariff AS\nSELECT *\nFROM gold.dbo.dbo_tariff\n\nCREATE OR ALTER VIEW dbo.Warehouse AS\nSELECT *\nFROM gold.dbo.dbo_warehouse",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "ReportingDB",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}